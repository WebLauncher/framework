# deny access to non-public files
RedirectMatch 404 \.ini
RedirectMatch 404 \.svn
RedirectMatch 404 \.htaccess
RedirectMatch 404 \.notes

# Push all requests to index.php
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]    
</IfModule>

# Use deflate if available
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml application/javascript text/javascript application/x-javascript text/css application/xml image/x-icon
    Header append Vary User-Agent
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
</IfModule>

# Push a future expire header if not pushed
<IfModule mod_expires.c>
	<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
		ExpiresDefault "modification plus 2 hours"
	</FilesMatch>
</IfModule>

# Unset ETag
Header unset ETag
FileETag None